<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>Axioså°è£… | Zymonody</title><meta name="keywords" content="å‰ç«¯,å·¥å…·"><meta name="author" content="Zymonody,2196905367@qq.com"><meta name="copyright" content="Zymonody"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="ğŸ‘ğŸ‘ğŸ‘è½¬è½½è‡ªCSDNç”¨æˆ·å¿ƒè‹¥çŒ›è™ï¼ŒåŸå¸–é“¾æ¥https:&#x2F;&#x2F;blog.csdn.net&#x2F;weixin_44278376&#x2F;article&#x2F;details&#x2F;113860367  1ï¸âƒ£å®‰è£…axios npm install axios; &#x2F;&#x2F; å®‰è£…axios  2ï¸âƒ£å¼•å…¥axios åœ¨é¡¹ç›®çš„srcç›®å½•ä¸­ï¼Œæ–°å»ºä¸€ä¸ªrequestæ–‡ä»¶å¤¹ï¼Œç„¶ååœ¨é‡Œé¢æ–°">
<meta property="og:type" content="article">
<meta property="og:title" content="Axioså°è£…">
<meta property="og:url" content="http://zymonody7.github.io/post/1f6b717.html">
<meta property="og:site_name" content="Zymonody">
<meta property="og:description" content="ğŸ‘ğŸ‘ğŸ‘è½¬è½½è‡ªCSDNç”¨æˆ·å¿ƒè‹¥çŒ›è™ï¼ŒåŸå¸–é“¾æ¥https:&#x2F;&#x2F;blog.csdn.net&#x2F;weixin_44278376&#x2F;article&#x2F;details&#x2F;113860367  1ï¸âƒ£å®‰è£…axios npm install axios; &#x2F;&#x2F; å®‰è£…axios  2ï¸âƒ£å¼•å…¥axios åœ¨é¡¹ç›®çš„srcç›®å½•ä¸­ï¼Œæ–°å»ºä¸€ä¸ªrequestæ–‡ä»¶å¤¹ï¼Œç„¶ååœ¨é‡Œé¢æ–°">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://zymonody7.github.io/img/top.jpg">
<meta property="article:published_time" content="2022-10-22T11:20:04.000Z">
<meta property="article:modified_time" content="2022-10-22T17:28:55.558Z">
<meta property="article:author" content="Zymonody">
<meta property="article:tag" content="å‰ç«¯">
<meta property="article:tag" content="å·¥å…·">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://zymonody7.github.io/img/top.jpg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://zymonody7.github.io/post/1f6b717"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"prismjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: 'å¤åˆ¶æˆåŠŸ',
    error: 'å¤åˆ¶é”™è¯¯',
    noSupport: 'æµè§ˆå™¨ä¸æ”¯æŒ'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: 'å¤©',
  date_suffix: {
    just: 'åˆšåˆš',
    min: 'åˆ†é’Ÿå‰',
    hour: 'å°æ—¶å‰',
    day: 'å¤©å‰',
    month: 'ä¸ªæœˆå‰'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Axioså°è£…',
  isPost: true,
  isHome: false,
  isHighlightShrink: true,
  isToc: true,
  postUpdate: '2022-10-23 01:28:55'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.3.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/avatar.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">6</div></a><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">7</div></a><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">0</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw iconfont icon-shouyex"></i><span> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw iconfont icon-zuixinwenzhang_huaban"></i><span> æ‰¾æ–‡ç« </span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/"><i class="fa-fw iconfont icon-fenlei1"></i><span> åˆ†ç±»</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw iconfont icon-biaoqian1"></i><span> æ ‡ç­¾</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw iconfont icon-shijianzhou"></i><span> å½’æ¡£</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw iconfont icon-shenghuo"></i><span> ç”Ÿæ´»</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/messageboard/"><i class="fa-fw iconfont icon-liaotian-04"></i><span> ç•™è¨€æ¿</span></a></li><li><a class="site-page child" href="/link/"><i class="fa-fw iconfont icon-lianjie"></i><span> å‹äººå¸</span></a></li><li><a class="site-page child" href="/share/"><i class="fa-fw iconfont icon-fenxiang"></i><span> åˆ†äº«</span></a></li><li><a class="site-page child" href="/gallery/"><i class="fa-fw iconfont icon-xiangce"></i><span> ç›¸å†Œ</span></a></li><li><a class="site-page child" href="/books/"><i class="fa-fw iconfont icon-shuji"></i><span> ä¹¦ç±</span></a></li><li><a class="site-page child" href="/FilmAndTV/"><i class="fa-fw iconfont icon-yingshi1"></i><span> å½±è§†</span></a></li><li><a class="site-page child" href="/daohang/"><i class="fa-fw iconfont icon-daohang"></i><span> å¯¼èˆªç«™</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw iconfont icon-gerenzhongxin"></i><span> å…³äºç¬”è€…</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('/img/top.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Zymonody</a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw iconfont icon-shouyex"></i><span> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw iconfont icon-zuixinwenzhang_huaban"></i><span> æ‰¾æ–‡ç« </span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/"><i class="fa-fw iconfont icon-fenlei1"></i><span> åˆ†ç±»</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw iconfont icon-biaoqian1"></i><span> æ ‡ç­¾</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw iconfont icon-shijianzhou"></i><span> å½’æ¡£</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw iconfont icon-shenghuo"></i><span> ç”Ÿæ´»</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/messageboard/"><i class="fa-fw iconfont icon-liaotian-04"></i><span> ç•™è¨€æ¿</span></a></li><li><a class="site-page child" href="/link/"><i class="fa-fw iconfont icon-lianjie"></i><span> å‹äººå¸</span></a></li><li><a class="site-page child" href="/share/"><i class="fa-fw iconfont icon-fenxiang"></i><span> åˆ†äº«</span></a></li><li><a class="site-page child" href="/gallery/"><i class="fa-fw iconfont icon-xiangce"></i><span> ç›¸å†Œ</span></a></li><li><a class="site-page child" href="/books/"><i class="fa-fw iconfont icon-shuji"></i><span> ä¹¦ç±</span></a></li><li><a class="site-page child" href="/FilmAndTV/"><i class="fa-fw iconfont icon-yingshi1"></i><span> å½±è§†</span></a></li><li><a class="site-page child" href="/daohang/"><i class="fa-fw iconfont icon-daohang"></i><span> å¯¼èˆªç«™</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw iconfont icon-gerenzhongxin"></i><span> å…³äºç¬”è€…</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Axioså°è£…</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">å‘è¡¨äº</span><time class="post-meta-date-created" datetime="2022-10-22T11:20:04.000Z" title="å‘è¡¨äº 2022-10-22 19:20:04">2022-10-22</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">æ›´æ–°äº</span><time class="post-meta-date-updated" datetime="2022-10-22T17:28:55.558Z" title="æ›´æ–°äº 2022-10-23 01:28:55">2022-10-23</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="Axioså°è£…"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">é˜…è¯»é‡:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><blockquote>
<p>ğŸ‘ğŸ‘ğŸ‘è½¬è½½è‡ªCSDNç”¨æˆ·å¿ƒè‹¥çŒ›è™ï¼ŒåŸå¸–é“¾æ¥<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_44278376/article/details/113860367">https://blog.csdn.net/weixin_44278376&#x2F;article&#x2F;details&#x2F;113860367</a></p>
</blockquote>
<h2 id="1ï¸âƒ£å®‰è£…axios"><a href="#1ï¸âƒ£å®‰è£…axios" class="headerlink" title="1ï¸âƒ£å®‰è£…axios"></a>1ï¸âƒ£å®‰è£…axios</h2><blockquote>
<p>npm install axios; &#x2F;&#x2F; å®‰è£…axios</p>
</blockquote>
<h2 id="2ï¸âƒ£å¼•å…¥axios"><a href="#2ï¸âƒ£å¼•å…¥axios" class="headerlink" title="2ï¸âƒ£å¼•å…¥axios"></a>2ï¸âƒ£å¼•å…¥axios</h2><blockquote>
<p>åœ¨é¡¹ç›®çš„srcç›®å½•ä¸­ï¼Œæ–°å»ºä¸€ä¸ªrequestæ–‡ä»¶å¤¹ï¼Œç„¶ååœ¨é‡Œé¢æ–°å»ºä¸€ä¸ªhttp.jså’Œä¸€ä¸ªapi.jsæ–‡ä»¶ã€‚http.jsæ–‡ä»¶ç”¨æ¥å°è£…æˆ‘ä»¬çš„axiosï¼Œapi.jsç”¨æ¥ç»Ÿä¸€ç®¡ç†æˆ‘ä»¬çš„æ¥å£ã€‚</p>
</blockquote>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">&#x2F;&#x2F;http.js
import axios from &#39;axios&#39;; &#x2F;&#x2F; å¼•å…¥axios
import QS from &#39;qs&#39;; &#x2F;&#x2F; å¼•å…¥qsæ¨¡å—ï¼Œç”¨äºåºåˆ—åŒ–</code></pre>

<h2 id="3ï¸âƒ£ç¯å¢ƒåˆ‡æ¢"><a href="#3ï¸âƒ£ç¯å¢ƒåˆ‡æ¢" class="headerlink" title="3ï¸âƒ£ç¯å¢ƒåˆ‡æ¢"></a>3ï¸âƒ£ç¯å¢ƒåˆ‡æ¢</h2><blockquote>
<p>æˆ‘ä»¬çš„é¡¹ç›®ç¯å¢ƒå¯èƒ½æœ‰å¼€å‘ç¯å¢ƒã€æµ‹è¯•ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒã€‚æˆ‘ä»¬é€šè¿‡nodeçš„ç¯å¢ƒå˜é‡æ¥åŒ¹é…æˆ‘ä»¬çš„é»˜è®¤çš„æ¥å£urlå‰ç¼€ã€‚axios.defaults.baseURLå¯ä»¥è®¾ç½®axiosçš„é»˜è®¤è¯·æ±‚åœ°å€å°±ä¸å¤šè¯´äº†ã€‚</p>
</blockquote>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">if (process.env.NODE_ENV &#x3D;&#x3D; &#39;development&#39;) &#123;  
    axios.defaults.baseURL &#x3D; &#39;https:&#x2F;&#x2F;www.baidu.com&#39;;&#125; 
else if (process.env.NODE_ENV &#x3D;&#x3D; &#39;debug&#39;) &#123;  
    axios.defaults.baseURL &#x3D; &#39;https:&#x2F;&#x2F;www.ceshi.com&#39;;
&#125; 
else if (process.env.NODE_ENV &#x3D;&#x3D; &#39;production&#39;) &#123;  
    axios.defaults.baseURL &#x3D; &#39;https:&#x2F;&#x2F;www.production.com&#39;;
&#125;</code></pre>

<h2 id="4ï¸âƒ£è®¾ç½®è¯·æ±‚è¶…æ—¶"><a href="#4ï¸âƒ£è®¾ç½®è¯·æ±‚è¶…æ—¶" class="headerlink" title="4ï¸âƒ£è®¾ç½®è¯·æ±‚è¶…æ—¶"></a>4ï¸âƒ£è®¾ç½®è¯·æ±‚è¶…æ—¶</h2><blockquote>
<p>é€šè¿‡axios.defaults.timeoutè®¾ç½®é»˜è®¤çš„è¯·æ±‚è¶…æ—¶æ—¶é—´ã€‚ä¾‹å¦‚è¶…è¿‡äº†10sï¼Œå°±ä¼šå‘ŠçŸ¥ç”¨æˆ·å½“å‰è¯·æ±‚è¶…æ—¶ï¼Œè¯·åˆ·æ–°ç­‰ã€‚</p>
</blockquote>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">axios.defaults.timeout &#x3D; 10000;</code></pre>

<h2 id="5ï¸âƒ£è¯·æ±‚å¤´è®¾ç½®"><a href="#5ï¸âƒ£è¯·æ±‚å¤´è®¾ç½®" class="headerlink" title="5ï¸âƒ£è¯·æ±‚å¤´è®¾ç½®"></a>5ï¸âƒ£è¯·æ±‚å¤´è®¾ç½®</h2><p>postè¯·æ±‚çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦åŠ ä¸Šä¸€ä¸ªè¯·æ±‚å¤´ï¼Œæ‰€ä»¥å¯ä»¥åœ¨è¿™é‡Œè¿›è¡Œä¸€ä¸ªé»˜è®¤çš„è®¾ç½®ï¼Œå³è®¾ç½®postçš„è¯·æ±‚å¤´ä¸º</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">application&#x2F;x-www-form-urlencoded;charset&#x3D;UTF-8
axios.defaults.headers.post[&#39;Content-Type&#39;] &#x3D; &#39;application&#x2F;x-www-form-urlencoded;charset&#x3D;UTF-8&#39;;</code></pre>

<h2 id="6ï¸âƒ£è¯·æ±‚æ‹¦æˆª"><a href="#6ï¸âƒ£è¯·æ±‚æ‹¦æˆª" class="headerlink" title="6ï¸âƒ£è¯·æ±‚æ‹¦æˆª"></a>6ï¸âƒ£è¯·æ±‚æ‹¦æˆª</h2><blockquote>
<p>æˆ‘ä»¬åœ¨å‘é€è¯·æ±‚å‰å¯ä»¥è¿›è¡Œä¸€ä¸ªè¯·æ±‚çš„æ‹¦æˆªï¼Œä¸ºä»€ä¹ˆè¦æ‹¦æˆªå‘¢ï¼Œæˆ‘ä»¬æ‹¦æˆªè¯·æ±‚æ˜¯ç”¨æ¥åšä»€ä¹ˆçš„å‘¢ï¼Ÿæ¯”å¦‚ï¼Œæœ‰äº›è¯·æ±‚æ˜¯éœ€è¦ç”¨æˆ·ç™»å½•ä¹‹åæ‰èƒ½è®¿é—®çš„ï¼Œæˆ–è€…postè¯·æ±‚çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦åºåˆ—åŒ–æˆ‘ä»¬æäº¤çš„æ•°æ®ã€‚è¿™æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è¯·æ±‚è¢«å‘é€ä¹‹å‰è¿›è¡Œä¸€ä¸ªæ‹¦æˆªï¼Œä»è€Œè¿›è¡Œæˆ‘ä»¬æƒ³è¦çš„æ“ä½œã€‚</p>
</blockquote>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"> &#x2F;&#x2F; å…ˆå¯¼å…¥vuex,å› ä¸ºæˆ‘ä»¬è¦ä½¿ç”¨åˆ°é‡Œé¢çš„çŠ¶æ€å¯¹è±¡
&#x2F;&#x2F; vuexçš„è·¯å¾„æ ¹æ®è‡ªå·±çš„è·¯å¾„å»å†™
import store from &#39;@&#x2F;store&#x2F;index&#39;;
&#x2F;&#x2F; è¯·æ±‚æ‹¦æˆªå™¨
axios.interceptors.request.use(  
    config &#x3D;&gt; &#123;  
        &#x2F;&#x2F; æ¯æ¬¡å‘é€è¯·æ±‚ä¹‹å‰åˆ¤æ–­vuexä¸­æ˜¯å¦å­˜åœ¨token  
        &#x2F;&#x2F; å¦‚æœå­˜åœ¨ï¼Œåˆ™ç»Ÿä¸€åœ¨httpè¯·æ±‚çš„headeréƒ½åŠ ä¸Štokenï¼Œè¿™æ ·åå°æ ¹æ®tokenåˆ¤æ–­ä½ çš„ç™»å½•æƒ…å†µ
        &#x2F;&#x2F; å³ä½¿æœ¬åœ°å­˜åœ¨tokenï¼Œä¹Ÿæœ‰å¯èƒ½tokenæ˜¯è¿‡æœŸçš„ï¼Œæ‰€ä»¥åœ¨å“åº”æ‹¦æˆªå™¨ä¸­è¦å¯¹è¿”å›çŠ¶æ€è¿›è¡Œåˆ¤æ–­ 
        const token &#x3D; store.state.token;  
        token &amp;&amp; (config.headers.Authorization &#x3D; token);  
        return config;  
    &#125;,  
    error &#x3D;&gt; &#123;  
        return Promise.error(error);  
&#125;)</code></pre>

<blockquote>
<p>è¿™é‡Œè¯´ä¸€ä¸‹tokenï¼Œä¸€èˆ¬æ˜¯åœ¨ç™»å½•å®Œæˆä¹‹åï¼Œå°†ç”¨æˆ·çš„tokené€šè¿‡localStorageæˆ–è€…cookieå­˜åœ¨æœ¬åœ°ï¼Œç„¶åç”¨æˆ·æ¯æ¬¡åœ¨è¿›å…¥é¡µé¢çš„æ—¶å€™ï¼ˆå³åœ¨main.jsä¸­ï¼‰ï¼Œä¼šé¦–å…ˆä»æœ¬åœ°å­˜å‚¨ä¸­è¯»å–tokenï¼Œå¦‚æœtokenå­˜åœ¨è¯´æ˜ç”¨æˆ·å·²ç»ç™»é™†è¿‡ï¼Œåˆ™æ›´æ–°vuexä¸­çš„tokençŠ¶æ€ã€‚ç„¶åï¼Œåœ¨æ¯æ¬¡è¯·æ±‚æ¥å£çš„æ—¶å€™ï¼Œéƒ½ä¼šåœ¨è¯·æ±‚çš„headerä¸­æºå¸¦tokenï¼Œåå°äººå‘˜å°±å¯ä»¥æ ¹æ®ä½ æºå¸¦çš„tokenæ¥åˆ¤æ–­ä½ çš„ç™»å½•æ˜¯å¦è¿‡æœŸï¼Œå¦‚æœæ²¡æœ‰æºå¸¦ï¼Œåˆ™è¯´æ˜æ²¡æœ‰ç™»å½•è¿‡ã€‚è¿™æ—¶å€™æˆ–è®¸æœ‰äº›å°ä¼™ä¼´ä¼šæœ‰ç–‘é—®äº†ï¼Œå°±æ˜¯æ¯ä¸ªè¯·æ±‚éƒ½æºå¸¦tokenï¼Œé‚£ä¹ˆè¦æ˜¯ä¸€ä¸ªé¡µé¢ä¸éœ€è¦ç”¨æˆ·ç™»å½•å°±å¯ä»¥è®¿é—®çš„æ€ä¹ˆåŠå‘¢ï¼Ÿå…¶å®ï¼Œä½ å‰ç«¯çš„è¯·æ±‚å¯ä»¥æºå¸¦tokenï¼Œä½†æ˜¯åå°å¯ä»¥é€‰æ‹©ä¸æ¥æ”¶å•Šï¼</p>
</blockquote>
<h2 id="7ï¸âƒ£è®¾ç½®å“åº”æ‹¦æˆªå™¨"><a href="#7ï¸âƒ£è®¾ç½®å“åº”æ‹¦æˆªå™¨" class="headerlink" title="7ï¸âƒ£è®¾ç½®å“åº”æ‹¦æˆªå™¨"></a>7ï¸âƒ£è®¾ç½®å“åº”æ‹¦æˆªå™¨</h2><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"> &#x2F;&#x2F; å“åº”æ‹¦æˆªå™¨
axios.interceptors.response.use(  
    response &#x3D;&gt; &#123;   
        &#x2F;&#x2F; å¦‚æœè¿”å›çš„çŠ¶æ€ç ä¸º200ï¼Œè¯´æ˜æ¥å£è¯·æ±‚æˆåŠŸï¼Œå¯ä»¥æ­£å¸¸æ‹¿åˆ°æ•°æ®   
        &#x2F;&#x2F; å¦åˆ™çš„è¯æŠ›å‡ºé”™è¯¯
        if (response.status &#x3D;&#x3D;&#x3D; 200) &#123;    
            return Promise.resolve(response);  
        &#125; else &#123;    
            return Promise.reject(response);  
        &#125;  
    &#125;,  
    &#x2F;&#x2F; æœåŠ¡å™¨çŠ¶æ€ç ä¸æ˜¯2å¼€å¤´çš„çš„æƒ…å†µ
    &#x2F;&#x2F; è¿™é‡Œå¯ä»¥è·Ÿä½ ä»¬çš„åå°å¼€å‘äººå‘˜åå•†å¥½ç»Ÿä¸€çš„é”™è¯¯çŠ¶æ€ç   
    &#x2F;&#x2F; ç„¶åæ ¹æ®è¿”å›çš„çŠ¶æ€ç è¿›è¡Œä¸€äº›æ“ä½œï¼Œä¾‹å¦‚ç™»å½•è¿‡æœŸæç¤ºï¼Œé”™è¯¯æç¤ºç­‰ç­‰
    &#x2F;&#x2F; ä¸‹é¢åˆ—ä¸¾å‡ ä¸ªå¸¸è§çš„æ“ä½œï¼Œå…¶ä»–éœ€æ±‚å¯è‡ªè¡Œæ‰©å±•
  
    error &#x3D;&gt; &#123;    
        if (error.response.status) &#123;    
            switch (error.response.status) &#123;        
                &#x2F;&#x2F; 401: æœªç™»å½•
                &#x2F;&#x2F; æœªç™»å½•åˆ™è·³è½¬ç™»å½•é¡µé¢ï¼Œå¹¶æºå¸¦å½“å‰é¡µé¢çš„è·¯å¾„
                &#x2F;&#x2F; åœ¨ç™»å½•æˆåŠŸåè¿”å›å½“å‰é¡µé¢ï¼Œè¿™ä¸€æ­¥éœ€è¦åœ¨ç™»å½•é¡µæ“ä½œã€‚        
                case 401:            
                    router.replace(&#123;                
                        path: &#39;&#x2F;login&#39;,                
                        query: &#123; 
                            redirect: router.currentRoute.fullPath 
                        &#125;
                    &#125;);
                    break;
                &#x2F;&#x2F; 403 tokenè¿‡æœŸ
                &#x2F;&#x2F; ç™»å½•è¿‡æœŸå¯¹ç”¨æˆ·è¿›è¡Œæç¤º
                &#x2F;&#x2F; æ¸…é™¤æœ¬åœ°tokenå’Œæ¸…ç©ºvuexä¸­tokenå¯¹è±¡
                &#x2F;&#x2F; è·³è½¬ç™»å½•é¡µé¢        
                case 403:
                     Toast(&#123;
                        message: &#39;ç™»å½•è¿‡æœŸï¼Œè¯·é‡æ–°ç™»å½•&#39;,
                        duration: 1000,
                        forbidClick: true
                    &#125;);
                    &#x2F;&#x2F; æ¸…é™¤token
                    localStorage.removeItem(&#39;token&#39;);
                    store.commit(&#39;loginSuccess&#39;, null);
                    &#x2F;&#x2F; è·³è½¬ç™»å½•é¡µé¢ï¼Œå¹¶å°†è¦æµè§ˆçš„é¡µé¢fullPathä¼ è¿‡å»ï¼Œç™»å½•æˆåŠŸåè·³è½¬éœ€è¦è®¿é—®çš„é¡µé¢ 
                    setTimeout(() &#x3D;&gt; &#123;                
                        router.replace(&#123;                    
                            path: &#39;&#x2F;login&#39;,                    
                            query: &#123; 
                                redirect: router.currentRoute.fullPath 
                            &#125;                
                        &#125;);            
                    &#125;, 1000);            
                    break; 
                &#x2F;&#x2F; 404è¯·æ±‚ä¸å­˜åœ¨
                case 404:
                    Toast(&#123;
                        message: &#39;ç½‘ç»œè¯·æ±‚ä¸å­˜åœ¨&#39;,
                        duration: 1500,
                        forbidClick: true
                    &#125;);
                    break;
                &#x2F;&#x2F; å…¶ä»–é”™è¯¯ï¼Œç›´æ¥æŠ›å‡ºé”™è¯¯æç¤º
                default:
                    Toast(&#123;
                        message: error.response.data.message,
                        duration: 1500,
                        forbidClick: true
                    &#125;);
            &#125;
            return Promise.reject(error.response);
        &#125;
    &#125; 
&#125;);</code></pre>

<blockquote>
<p>å“åº”æ‹¦æˆªå™¨å¾ˆå¥½ç†è§£ï¼Œå°±æ˜¯æœåŠ¡å™¨è¿”å›ç»™æˆ‘ä»¬çš„æ•°æ®ï¼Œæˆ‘ä»¬åœ¨æ‹¿åˆ°ä¹‹å‰å¯ä»¥å¯¹ä»–è¿›è¡Œä¸€äº›å¤„ç†ã€‚ä¾‹å¦‚ä¸Šé¢çš„æ€æƒ³ï¼šå¦‚æœåå°è¿”å›çš„çŠ¶æ€ç æ˜¯200ï¼Œåˆ™æ­£å¸¸è¿”å›æ•°æ®ï¼Œå¦åˆ™çš„æ ¹æ®é”™è¯¯çš„çŠ¶æ€ç ç±»å‹è¿›è¡Œä¸€äº›æˆ‘ä»¬éœ€è¦çš„é”™è¯¯ï¼Œå…¶å®è¿™é‡Œä¸»è¦å°±æ˜¯è¿›è¡Œäº†é”™è¯¯çš„ç»Ÿä¸€å¤„ç†å’Œæ²¡ç™»å½•æˆ–ç™»å½•è¿‡æœŸåè°ƒæ•´ç™»å½•é¡µçš„ä¸€ä¸ªæ“ä½œã€‚è¦æ³¨æ„çš„æ˜¯ï¼Œä¸Šé¢çš„Toast()æ–¹æ³•ï¼Œæ˜¯æˆ‘å¼•å…¥çš„vantåº“ä¸­çš„toastè½»æç¤ºç»„ä»¶ï¼Œä½ æ ¹æ®ä½ çš„uiåº“ï¼Œå¯¹åº”ä½¿ç”¨ä½ çš„ä¸€ä¸ªæç¤ºç»„ä»¶ã€‚</p>
</blockquote>
<h2 id="8ï¸âƒ£å°è£…getå’Œpost"><a href="#8ï¸âƒ£å°è£…getå’Œpost" class="headerlink" title="8ï¸âƒ£å°è£…getå’Œpost"></a>8ï¸âƒ£å°è£…getå’Œpost</h2><blockquote>
<p>æˆ‘ä»¬å¸¸ç”¨çš„ajaxè¯·æ±‚æ–¹æ³•æœ‰getã€postã€putç­‰æ–¹æ³•ï¼Œç›¸ä¿¡å°ä¼™ä¼´éƒ½ä¸ä¼šé™Œç”Ÿã€‚axioså¯¹åº”çš„ä¹Ÿæœ‰å¾ˆå¤šç±»ä¼¼çš„æ–¹æ³•ï¼Œä¸æ¸…æ¥šçš„å¯ä»¥çœ‹ä¸‹æ–‡æ¡£ã€‚ä½†æ˜¯ä¸ºäº†ç®€åŒ–æˆ‘ä»¬çš„ä»£ç ï¼Œæˆ‘ä»¬è¿˜æ˜¯è¦å¯¹å…¶è¿›è¡Œä¸€ä¸ªç®€å•çš„å°è£…ã€‚ä¸‹é¢æˆ‘ä»¬ä¸»è¦å°è£…ä¸¤ä¸ªæ–¹æ³•ï¼šgetå’Œpostã€‚</p>
<blockquote>
<p>getæ–¹æ³•ï¼šæˆ‘ä»¬é€šè¿‡å®šä¹‰ä¸€ä¸ªgetå‡½æ•°ï¼Œgetå‡½æ•°æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°è¡¨ç¤ºæˆ‘ä»¬è¦è¯·æ±‚çš„urlåœ°å€ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯æˆ‘ä»¬è¦æºå¸¦çš„è¯·æ±‚å‚æ•°ã€‚getå‡½æ•°è¿”å›ä¸€ä¸ªpromiseå¯¹è±¡ï¼Œå½“axioså…¶è¯·æ±‚æˆåŠŸæ—¶resolveæœåŠ¡å™¨è¿”å› å€¼ï¼Œè¯·æ±‚å¤±è´¥æ—¶rejecté”™è¯¯å€¼ã€‚æœ€åé€šè¿‡exportæŠ›å‡ºgetå‡½æ•°ã€‚</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">&#x2F;**
 * getæ–¹æ³•ï¼Œå¯¹åº”getè¯·æ±‚
 * @param &#123;String&#125; url [è¯·æ±‚çš„urlåœ°å€]
 * @param &#123;Object&#125; params [è¯·æ±‚æ—¶æºå¸¦çš„å‚æ•°]
 *&#x2F;
export function get(url, params)&#123;  
    return new Promise((resolve, reject) &#x3D;&gt;&#123;    
        axios.get(url, &#123;        
            params: params    
        &#125;).then(res &#x3D;&gt; &#123;
            resolve(res.data);
        &#125;).catch(err &#x3D;&gt;&#123;
            reject(err.data)    
    &#125;)  
&#125;);&#125;
</code></pre>

<p>postæ–¹æ³•ï¼šåŸç†åŒgetåŸºæœ¬ä¸€æ ·ï¼Œä½†æ˜¯è¦æ³¨æ„çš„æ˜¯ï¼Œpostæ–¹æ³•å¿…é¡»è¦ä½¿ç”¨å¯¹æäº¤ä»å‚æ•°å¯¹è±¡è¿›è¡Œåºåˆ—åŒ–çš„æ“ä½œï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘ä»¬é€šè¿‡nodeçš„qsæ¨¡å—æ¥åºåˆ—åŒ–æˆ‘ä»¬çš„å‚æ•°ã€‚è¿™ä¸ªå¾ˆé‡è¦ï¼Œå¦‚æœæ²¡æœ‰åºåˆ—åŒ–æ“ä½œï¼Œåå°æ˜¯æ‹¿ä¸åˆ°ä½ æäº¤çš„æ•°æ®çš„ã€‚è¿™å°±æ˜¯æ–‡ç« å¼€å¤´æˆ‘ä»¬import QS from â€˜qsâ€™;çš„åŸå› ã€‚å¦‚æœä¸æ˜ç™½åºåˆ—åŒ–æ˜¯ä»€ä¹ˆæ„æ€çš„ï¼Œå°±ç™¾åº¦ä¸€ä¸‹å§ï¼Œç­”æ¡ˆä¸€å¤§å †ã€‚</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">&#x2F;** 
 * postæ–¹æ³•ï¼Œå¯¹åº”postè¯·æ±‚ 
 * @param &#123;String&#125; url [è¯·æ±‚çš„urlåœ°å€] 
 * @param &#123;Object&#125; params [è¯·æ±‚æ—¶æºå¸¦çš„å‚æ•°] 
 *&#x2F;
export function post(url, params) &#123;
    return new Promise((resolve, reject) &#x3D;&gt; &#123;
         axios.post(url, QS.stringify(params))
        .then(res &#x3D;&gt; &#123;
            resolve(res.data);
        &#125;)
        .catch(err &#x3D;&gt;&#123;
            reject(err.data)
        &#125;)
    &#125;);
&#125;
</code></pre>

</blockquote>
<p>è¿™é‡Œæœ‰ä¸ªå°ç»†èŠ‚è¯´ä¸‹ï¼Œaxios.get()æ–¹æ³•å’Œaxios.post()åœ¨æäº¤æ•°æ®æ—¶å‚æ•°çš„ä¹¦å†™æ–¹å¼è¿˜æ˜¯æœ‰åŒºåˆ«çš„ã€‚åŒºåˆ«å°±æ˜¯ï¼Œgetçš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ª{}ï¼Œç„¶åè¿™ä¸ªå¯¹è±¡çš„paramså±æ€§å€¼æ˜¯ä¸€ä¸ªå‚æ•°å¯¹è±¡çš„ã€‚è€Œpostçš„ç¬¬äºŒä¸ªå‚æ•°å°±æ˜¯ä¸€ä¸ªå‚æ•°å¯¹è±¡ã€‚ä¸¤è€…ç•¥å¾®çš„åŒºåˆ«è¦ç•™æ„å“¦ï¼</p>
</blockquote>
<h2 id="nine-apiç»Ÿä¸€ç®¡ç†"><a href="#nine-apiç»Ÿä¸€ç®¡ç†" class="headerlink" title=":nine:apiç»Ÿä¸€ç®¡ç†"></a>:nine:apiç»Ÿä¸€ç®¡ç†</h2><blockquote>
<p>æ•´é½çš„apiå°±åƒç”µè·¯æ¿ä¸€æ ·ï¼Œå³ä½¿å†å¤æ‚ä¹Ÿèƒ½å¾ˆæ¸…æ™°æ•´ä¸ªçº¿è·¯ã€‚ä¸Šé¢è¯´äº†ï¼Œæˆ‘ä»¬ä¼šæ–°å»ºä¸€ä¸ªapi.js,ç„¶ååœ¨è¿™ä¸ªæ–‡ä»¶ä¸­å­˜æ”¾æˆ‘ä»¬æ‰€æœ‰çš„apiæ¥å£ã€‚<br>é¦–å…ˆæˆ‘ä»¬åœ¨api.jsä¸­å¼•å…¥æˆ‘ä»¬å°è£…çš„getå’Œpostæ–¹æ³•</p>
</blockquote>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">import &#123; get, post &#125; from &#39;.&#x2F;http&#39;</code></pre>
<blockquote>
<p>ç°åœ¨ï¼Œä¾‹å¦‚æˆ‘ä»¬æœ‰è¿™æ ·ä¸€ä¸ªæ¥å£ï¼Œæ˜¯ä¸€ä¸ªpostè¯·æ±‚ï¼š<a target="_blank" rel="noopener" href="http://www.baiodu.com/api/v1/users/my_address/address_edit_before">http://www.baiodu.com/api/v1/users/my_address/address_edit_before</a>æˆ‘ä»¬å¯ä»¥åœ¨api.jsä¸­è¿™æ ·å°è£…ï¼š</p>
</blockquote>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">export const apiAddress &#x3D; p &#x3D;&gt; post(&#39;api&#x2F;v1&#x2F;users&#x2F;my_address&#x2F;address_edit_before&#39;, p);
</code></pre>
<blockquote>
<p>æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªapiAddressæ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•æœ‰ä¸€ä¸ªå‚æ•°pï¼Œpæ˜¯æˆ‘ä»¬è¯·æ±‚æ¥å£æ—¶æºå¸¦çš„å‚æ•°å¯¹è±¡ã€‚è€Œåè°ƒç”¨äº†æˆ‘ä»¬å°è£…çš„postæ–¹æ³•ï¼Œpostæ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æˆ‘ä»¬çš„æ¥å£åœ°å€ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯apiAddressçš„på‚æ•°ï¼Œå³è¯·æ±‚æ¥å£æ—¶æºå¸¦çš„å‚æ•°å¯¹è±¡ã€‚æœ€åé€šè¿‡exportå¯¼å‡ºapiAddressã€‚ç„¶ååœ¨æˆ‘ä»¬çš„é¡µé¢ä¸­å¯ä»¥è¿™æ ·è°ƒç”¨æˆ‘ä»¬çš„apiæ¥å£ï¼š</p>
</blockquote>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">import &#123; apiAddress &#125; from &#39;@&#x2F;request&#x2F;api&#39;;&#x2F;&#x2F; å¯¼å…¥æˆ‘ä»¬çš„apiæ¥å£
export default &#123;        
    name: &#39;Address&#39;,    
    created () &#123;
        this.onLoad();
    &#125;,
    methods: &#123;            
        &#x2F;&#x2F; è·å–æ•°æ®            
        onLoad() &#123;
            &#x2F;&#x2F; è°ƒç”¨apiæ¥å£ï¼Œå¹¶ä¸”æä¾›äº†ä¸¤ä¸ªå‚æ•°                
            apiAddress(&#123;                    
                type: 0,                    
                sort: 1                
            &#125;).then(res &#x3D;&gt; &#123;
                &#x2F;&#x2F; è·å–æ•°æ®æˆåŠŸåçš„å…¶ä»–æ“ä½œ           
            &#125;)            
        &#125;        
    &#125;
&#125;</code></pre>
<blockquote>
<p>å…¶ä»–çš„apiæ¥å£ï¼Œå°±åœ¨pai.jsä¸­ç»§ç»­å¾€ä¸‹é¢æ‰©å±•å°±å¯ä»¥äº†ã€‚å‹æƒ…æç¤ºï¼Œä¸ºæ¯ä¸ªæ¥å£å†™å¥½æ³¨é‡Šå“¦ï¼ï¼ï¼apiæ¥å£ç®¡ç†çš„ä¸€ä¸ªå¥½å¤„å°±æ˜¯ï¼Œæˆ‘ä»¬æŠŠapiç»Ÿä¸€é›†ä¸­èµ·æ¥ï¼Œå¦‚æœåæœŸéœ€è¦ä¿®æ”¹æ¥å£ï¼Œæˆ‘ä»¬å°±ç›´æ¥åœ¨api.jsä¸­æ‰¾åˆ°å¯¹åº”çš„ä¿®æ”¹å°±å¥½äº†ï¼Œè€Œä¸ç”¨å»æ¯ä¸€ä¸ªé¡µé¢æŸ¥æ‰¾æˆ‘ä»¬çš„æ¥å£ç„¶åå†ä¿®æ”¹ä¼šå¾ˆéº»çƒ¦ã€‚å…³é”®æ˜¯ï¼Œä¸‡ä¸€ä¿®æ”¹çš„é‡æ¯”è¾ƒå¤§ï¼Œå°±è§„æ ¼ggäº†ã€‚è¿˜æœ‰å°±æ˜¯å¦‚æœç›´æ¥åœ¨æˆ‘ä»¬çš„ä¸šåŠ¡ä»£ç ä¿®æ”¹æ¥å£ï¼Œä¸€ä¸å°å¿ƒè¿˜å®¹æ˜“åŠ¨åˆ°æˆ‘ä»¬çš„ä¸šåŠ¡ä»£ç é€ æˆä¸å¿…è¦çš„éº»çƒ¦ã€‚</p>
</blockquote>
<h2 id="end-å®Œæˆçš„axioså°è£…ä»£ç "><a href="#end-å®Œæˆçš„axioså°è£…ä»£ç " class="headerlink" title=":end:å®Œæˆçš„axioså°è£…ä»£ç "></a>:end:å®Œæˆçš„axioså°è£…ä»£ç </h2><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">&#x2F;**axioså°è£…
 * è¯·æ±‚æ‹¦æˆªã€ç›¸åº”æ‹¦æˆªã€é”™è¯¯ç»Ÿä¸€å¤„ç†
 *&#x2F;
import axios from &#39;axios&#39;;
import QS from &#39;qs&#39;;
import &#123; Toast &#125; from &#39;vant&#39;;
import store from &#39;..&#x2F;store&#x2F;index&#39;

&#x2F;&#x2F; ç¯å¢ƒçš„åˆ‡æ¢
if (process.env.NODE_ENV &#x3D;&#x3D; &#39;development&#39;) &#123;  
    axios.defaults.baseURL &#x3D; &#39;&#x2F;api&#39;;
&#125; else if (process.env.NODE_ENV &#x3D;&#x3D; &#39;debug&#39;) &#123;  
    axios.defaults.baseURL &#x3D; &#39;&#39;;
&#125; else if (process.env.NODE_ENV &#x3D;&#x3D; &#39;production&#39;) &#123;  
    axios.defaults.baseURL &#x3D; &#39;http:&#x2F;&#x2F;api.123dailu.com&#x2F;&#39;;
&#125;

&#x2F;&#x2F; è¯·æ±‚è¶…æ—¶æ—¶é—´
axios.defaults.timeout &#x3D; 10000;

&#x2F;&#x2F; postè¯·æ±‚å¤´
axios.defaults.headers.post[&#39;Content-Type&#39;] &#x3D; &#39;application&#x2F;x-www-form-urlencoded;charset&#x3D;UTF-8&#39;;

&#x2F;&#x2F; è¯·æ±‚æ‹¦æˆªå™¨
axios.interceptors.request.use(  
    config &#x3D;&gt; &#123;
        &#x2F;&#x2F; æ¯æ¬¡å‘é€è¯·æ±‚ä¹‹å‰åˆ¤æ–­æ˜¯å¦å­˜åœ¨tokenï¼Œå¦‚æœå­˜åœ¨ï¼Œåˆ™ç»Ÿä¸€åœ¨httpè¯·æ±‚çš„headeréƒ½åŠ ä¸Štokenï¼Œä¸ç”¨æ¯æ¬¡è¯·æ±‚éƒ½æ‰‹åŠ¨æ·»åŠ äº†
        &#x2F;&#x2F; å³ä½¿æœ¬åœ°å­˜åœ¨tokenï¼Œä¹Ÿæœ‰å¯èƒ½tokenæ˜¯è¿‡æœŸçš„ï¼Œæ‰€ä»¥åœ¨å“åº”æ‹¦æˆªå™¨ä¸­è¦å¯¹è¿”å›çŠ¶æ€è¿›è¡Œåˆ¤æ–­
        const token &#x3D; store.state.token;  
        token &amp;&amp; (config.headers.Authorization &#x3D; token);  
        return config;  
    &#125;,  
    error &#x3D;&gt; &#123;  
        return Promise.error(error);  
    &#125;)

&#x2F;&#x2F; å“åº”æ‹¦æˆªå™¨
axios.interceptors.response.use(  
    response &#x3D;&gt; &#123;  
        if (response.status &#x3D;&#x3D;&#x3D; 200) &#123;  
            return Promise.resolve(response);  
        &#125; else &#123;  
            return Promise.reject(response);  
        &#125;  
    &#125;,
    &#x2F;&#x2F; æœåŠ¡å™¨çŠ¶æ€ç ä¸æ˜¯200çš„æƒ…å†µ  
    error &#x3D;&gt; &#123;  
        if (error.response.status) &#123;  
            switch (error.response.status) &#123;  
                &#x2F;&#x2F; 401: æœªç™»å½•  
                &#x2F;&#x2F; æœªç™»å½•åˆ™è·³è½¬ç™»å½•é¡µé¢ï¼Œå¹¶æºå¸¦å½“å‰é¡µé¢çš„è·¯å¾„  
                &#x2F;&#x2F; åœ¨ç™»å½•æˆåŠŸåè¿”å›å½“å‰é¡µé¢ï¼Œè¿™ä¸€æ­¥éœ€è¦åœ¨ç™»å½•é¡µæ“ä½œã€‚  
                case 401:  
                    router.replace(&#123;  
                        path: &#39;&#x2F;login&#39;,  
                        query: &#123; redirect: router.currentRoute.fullPath &#125; 
                    &#125;);
                    break;
                &#x2F;&#x2F; 403 tokenè¿‡æœŸ  
                &#x2F;&#x2F; ç™»å½•è¿‡æœŸå¯¹ç”¨æˆ·è¿›è¡Œæç¤º  
                &#x2F;&#x2F; æ¸…é™¤æœ¬åœ°tokenå’Œæ¸…ç©ºvuexä¸­tokenå¯¹è±¡  
                &#x2F;&#x2F; è·³è½¬ç™»å½•é¡µé¢  
                case 403:   
                    Toast(&#123;  
                        message: &#39;ç™»å½•è¿‡æœŸï¼Œè¯·é‡æ–°ç™»å½•&#39;,  
                        duration: 1000,  
                        forbidClick: true  
                    &#125;);  
                    &#x2F;&#x2F; æ¸…é™¤token  
                    localStorage.removeItem(&#39;token&#39;);  
                    store.commit(&#39;loginSuccess&#39;, null);  
                    &#x2F;&#x2F; è·³è½¬ç™»å½•é¡µé¢ï¼Œå¹¶å°†è¦æµè§ˆçš„é¡µé¢fullPathä¼ è¿‡å»ï¼Œç™»å½•æˆåŠŸåè·³è½¬éœ€è¦è®¿é—®çš„é¡µé¢
                    setTimeout(() &#x3D;&gt; &#123;  
                        router.replace(&#123;  
                            path: &#39;&#x2F;login&#39;,  
                            query: &#123; 
                                redirect: router.currentRoute.fullPath 
                            &#125;  
                        &#125;);  
                    &#125;, 1000);  
                    break; 
                &#x2F;&#x2F; 404è¯·æ±‚ä¸å­˜åœ¨  
                case 404:  
                    Toast(&#123;  
                        message: &#39;ç½‘ç»œè¯·æ±‚ä¸å­˜åœ¨&#39;,  
                        duration: 1500,  
                        forbidClick: true  
                    &#125;);  
                break;  
                &#x2F;&#x2F; å…¶ä»–é”™è¯¯ï¼Œç›´æ¥æŠ›å‡ºé”™è¯¯æç¤º  
                default:  
                    Toast(&#123;  
                        message: error.response.data.message,  
                        duration: 1500,  
                        forbidClick: true  
                    &#125;);  
            &#125;  
            return Promise.reject(error.response);  
        &#125;   
    &#125;
);
&#x2F;** 
 * getæ–¹æ³•ï¼Œå¯¹åº”getè¯·æ±‚ 
 * @param &#123;String&#125; url [è¯·æ±‚çš„urlåœ°å€] 
 * @param &#123;Object&#125; params [è¯·æ±‚æ—¶æºå¸¦çš„å‚æ•°] 
 *&#x2F;
export function get(url, params)&#123;  
    return new Promise((resolve, reject) &#x3D;&gt;&#123;  
        axios.get(url, &#123;  
            params: params  
        &#125;)  
        .then(res &#x3D;&gt; &#123;  
            resolve(res.data);  
        &#125;)  
        .catch(err &#x3D;&gt; &#123;  
            reject(err.data)  
        &#125;)  
    &#125;);
&#125;
&#x2F;** 
 * postæ–¹æ³•ï¼Œå¯¹åº”postè¯·æ±‚ 
 * @param &#123;String&#125; url [è¯·æ±‚çš„urlåœ°å€] 
 * @param &#123;Object&#125; params [è¯·æ±‚æ—¶æºå¸¦çš„å‚æ•°] 
 *&#x2F;
export function post(url, params) &#123;  
    return new Promise((resolve, reject) &#x3D;&gt; &#123;   
        axios.post(url, QS.stringify(params))  
        .then(res &#x3D;&gt; &#123;  
            resolve(res.data);  
        &#125;)  
        .catch(err &#x3D;&gt; &#123;  
            reject(err.data)  
        &#125;)  
    &#125;);
&#125;</code></pre>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">æ–‡ç« ä½œè€…: </span><span class="post-copyright-info"><a href="http://Zymonody7.github.io">Zymonody</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">æ–‡ç« é“¾æ¥: </span><span class="post-copyright-info"><a href="http://zymonody7.github.io/post/1f6b717.html">http://zymonody7.github.io/post/1f6b717.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">ç‰ˆæƒå£°æ˜: </span><span class="post-copyright-info">æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜æ¥è‡ª <a href="http://Zymonody7.github.io" target="_blank">Zymonody</a>ï¼</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E5%89%8D%E7%AB%AF/">å‰ç«¯</a><a class="post-meta__tags" href="/tags/%E5%B7%A5%E5%85%B7/">å·¥å…·</a></div><div class="post_share"><div class="social-share" data-image="/img/top.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/post/3d599aff.html"><img class="prev-cover" src="/img/top.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">ä¸Šä¸€ç¯‡</div><div class="prev_info">markdown-emojiå­—å…¸</div></div></a></div><div class="next-post pull-right"><a href="/post/8ef81200.html"><img class="next-cover" src="/img/top.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">ä¸‹ä¸€ç¯‡</div><div class="next_info">é”‹è´­å°ç¨‹åº</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>ç›¸å…³æ¨è</span></div><div class="relatedPosts-list"><div><a href="/post/8ef81200.html" title="é”‹è´­å°ç¨‹åº"><img class="cover" src="/img/top.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-10-22</div><div class="title">é”‹è´­å°ç¨‹åº</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Zymonody</div><div class="author-info__description">ä¸€ä¸ªæ”¶è—å›å¿†ä¸åˆ†äº«æŠ€æœ¯çš„åœ°æ–¹ï¼</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">6</div></a><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">7</div></a><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">0</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>å…¬å‘Š</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>ç›®å½•</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#1%EF%B8%8F%E2%83%A3%E5%AE%89%E8%A3%85axios"><span class="toc-number">1.</span> <span class="toc-text">1ï¸âƒ£å®‰è£…axios</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2%EF%B8%8F%E2%83%A3%E5%BC%95%E5%85%A5axios"><span class="toc-number">2.</span> <span class="toc-text">2ï¸âƒ£å¼•å…¥axios</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3%EF%B8%8F%E2%83%A3%E7%8E%AF%E5%A2%83%E5%88%87%E6%8D%A2"><span class="toc-number">3.</span> <span class="toc-text">3ï¸âƒ£ç¯å¢ƒåˆ‡æ¢</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4%EF%B8%8F%E2%83%A3%E8%AE%BE%E7%BD%AE%E8%AF%B7%E6%B1%82%E8%B6%85%E6%97%B6"><span class="toc-number">4.</span> <span class="toc-text">4ï¸âƒ£è®¾ç½®è¯·æ±‚è¶…æ—¶</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5%EF%B8%8F%E2%83%A3%E8%AF%B7%E6%B1%82%E5%A4%B4%E8%AE%BE%E7%BD%AE"><span class="toc-number">5.</span> <span class="toc-text">5ï¸âƒ£è¯·æ±‚å¤´è®¾ç½®</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6%EF%B8%8F%E2%83%A3%E8%AF%B7%E6%B1%82%E6%8B%A6%E6%88%AA"><span class="toc-number">6.</span> <span class="toc-text">6ï¸âƒ£è¯·æ±‚æ‹¦æˆª</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7%EF%B8%8F%E2%83%A3%E8%AE%BE%E7%BD%AE%E5%93%8D%E5%BA%94%E6%8B%A6%E6%88%AA%E5%99%A8"><span class="toc-number">7.</span> <span class="toc-text">7ï¸âƒ£è®¾ç½®å“åº”æ‹¦æˆªå™¨</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8%EF%B8%8F%E2%83%A3%E5%B0%81%E8%A3%85get%E5%92%8Cpost"><span class="toc-number">8.</span> <span class="toc-text">8ï¸âƒ£å°è£…getå’Œpost</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#nine-api%E7%BB%9F%E4%B8%80%E7%AE%A1%E7%90%86"><span class="toc-number">9.</span> <span class="toc-text">:nine:apiç»Ÿä¸€ç®¡ç†</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#end-%E5%AE%8C%E6%88%90%E7%9A%84axios%E5%B0%81%E8%A3%85%E4%BB%A3%E7%A0%81"><span class="toc-number">10.</span> <span class="toc-text">:end:å®Œæˆçš„axioså°è£…ä»£ç </span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>æœ€æ–°æ–‡ç« </span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/post/9ac48510.html" title="Reactå­¦ä¹ "><img src="/img/top.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Reactå­¦ä¹ "/></a><div class="content"><a class="title" href="/post/9ac48510.html" title="Reactå­¦ä¹ ">Reactå­¦ä¹ </a><time datetime="2022-11-05T13:29:02.000Z" title="å‘è¡¨äº 2022-11-05 21:29:02">2022-11-05</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/post/ebaca3bf.html" title="nestå­¦ä¹ "><img src="/img/top.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="nestå­¦ä¹ "/></a><div class="content"><a class="title" href="/post/ebaca3bf.html" title="nestå­¦ä¹ ">nestå­¦ä¹ </a><time datetime="2022-11-03T13:15:50.000Z" title="å‘è¡¨äº 2022-11-03 21:15:50">2022-11-03</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/post/3d599aff.html" title="markdown-emojiå­—å…¸"><img src="/img/top.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="markdown-emojiå­—å…¸"/></a><div class="content"><a class="title" href="/post/3d599aff.html" title="markdown-emojiå­—å…¸">markdown-emojiå­—å…¸</a><time datetime="2022-10-22T16:55:04.000Z" title="å‘è¡¨äº 2022-10-23 00:55:04">2022-10-23</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/post/1f6b717.html" title="Axioså°è£…"><img src="/img/top.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Axioså°è£…"/></a><div class="content"><a class="title" href="/post/1f6b717.html" title="Axioså°è£…">Axioså°è£…</a><time datetime="2022-10-22T11:20:04.000Z" title="å‘è¡¨äº 2022-10-22 19:20:04">2022-10-22</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/post/8ef81200.html" title="é”‹è´­å°ç¨‹åº"><img src="/img/top.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="é”‹è´­å°ç¨‹åº"/></a><div class="content"><a class="title" href="/post/8ef81200.html" title="é”‹è´­å°ç¨‹åº">é”‹è´­å°ç¨‹åº</a><time datetime="2022-10-22T08:15:54.000Z" title="å‘è¡¨äº 2022-10-22 16:15:54">2022-10-22</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2022 By Zymonody</div><div class="framework-info"><span>æ¡†æ¶ </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>ä¸»é¢˜ </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="é˜…è¯»æ¨¡å¼"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="æµ…è‰²å’Œæ·±è‰²æ¨¡å¼è½¬æ¢"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="å•æ å’ŒåŒæ åˆ‡æ¢"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="è®¾ç½®"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="ç›®å½•"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="å›åˆ°é¡¶éƒ¨"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><div class="js-pjax"></div><script src="https://cdn.jsdelivr.net/npm/prismjs/prism.min.js"></script><script src="https://cdn.jsdelivr.net/npm/prismjs/plugins/autoloader/prism-autoloader.min.js"></script><script src="https://cdn.jsdelivr.net/npm/prismjs/plugins/line-numbers/prism-line-numbers.min.js"></script><script defer="defer" id="fluttering_ribbon" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-fluttering-ribbon.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><script id="click-show-text" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/click-show-text.min.js" data-mobile="undefined" data-text="å¯Œå¼º,æ°‘ä¸»,æ–‡æ˜,å’Œè°,è‡ªç”±,å¹³ç­‰,å…¬æ­£,æ³•æ²»,çˆ±å›½,æ•¬ä¸š,è¯šä¿¡,å‹å–„" data-fontsize="15px" data-random="undefined" async="async"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>